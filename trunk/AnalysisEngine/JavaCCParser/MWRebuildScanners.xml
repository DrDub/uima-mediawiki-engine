<?xml version="1.0"?>
<project name="Grammar Rebuild Script" default="rebuild">
	<dirname property="project" file="${ant.file}" />
	<dirname property="workspace" file="${ant.file}/../" />
	<property name="src" value="${project}/src/org/wikimodel/wem/" />
	<property name="javacc.home" value="/Users/Bowbaq/Downloads/javacc-5.0/bin/lib" />

	<target name="rebuild" depends="clean, build" />

	<target name="clean">
		<delete>
			<fileset dir="${src}" includes="**/javacc/*.java" />
		</delete>
	</target>

	<target name="build">
		<antcall target="doBuild">
			<param name="input.file" value="${src}/mediawiki/javacc/MediawikiScanner.jj" />
		</antcall>
	</target>

	<target name="doBuild">
		<ant antfile="WikiGrammarReplacement.xml">
			<property name="input.file" value="${input.file}" />
		</ant>
		<javacc target="${input.file}" javacchome="${javacc.home}" unicodeinput="true" />
	</target>

</project>

